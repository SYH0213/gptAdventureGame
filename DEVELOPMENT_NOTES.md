# 개발 노트 및 향후 개선 사항

이 파일은 프로젝트 개발 중 발생한 아이디어, 개선점, 버그 수정 계획 등을 기록하는 공간입니다.

## 현재까지의 개발 요약

-   **기본 구조**: Flask 기반의 웹 애플리케이션.
-   **AI 모델**: Google Gemini (gemini-2.5-flash) 사용.
-   **스토리 시작**: 플레이어의 직접 입력으로 스토리 시작.
-   **게임 상태**: `player_state` 딕셔너리로 플레이어 스탯 및 인벤토리 관리.
-   **프롬프트 관리**: `game_rules2.md`를 통한 규칙 주입, 최근 대화 5턴 포함.
-   **JSON 파싱**: 모델 응답의 JSON 파싱 로직 강화.
-   **게임 종료**: 목표 달성 시 게임 종료 및 마무리 멘트.

## 향후 개선 아이디어

1.  **게임 저장/불러오기 기능**: 현재 게임 상태는 서버 메모리에만 존재. 세션 또는 파일/DB를 이용한 영구 저장 기능 추가.
    -   사용자별 세션 관리 (로그인 기능 필요).
    -   게임 상태를 JSON 파일로 저장/로드하는 기능.
2.  **더욱 견고한 JSON 파싱**: 모델이 JSON을 완벽하게 반환하지 않을 경우를 대비하여, `state_updates` 필드에 대한 유효성 검사 및 기본값 설정 강화.
3.  **프롬프트 엔지니어링 최적화**:
    -   `game_rules2.md`의 내용을 더 효과적으로 모델에 전달하는 방법 연구.
    -   모델이 스탯 업데이트를 더 정확하게 하도록 유도하는 프롬프트 기법.
    -   게임 종료 조건 판단의 정확도 향상.
4.  **UI/UX 개선**: 
    -   스탯 변화 시 시각적 피드백 (예: 체력 감소 시 색상 변화).
    -   인벤토리 아이템 사용 기능.
    -   게임 오버 시 재시작 버튼.
5.  **에러 핸들링 강화**: API 호출 실패 시 사용자에게 더 친절한 메시지 제공.
6.  **테스트 코드 작성**: 단위 테스트 및 통합 테스트를 통해 코드의 안정성 확보.
7.  **다국어 지원**: 게임 마스터의 언어를 변경할 수 있는 기능.
8.  **모델 선택 옵션**: `app.py`에서 사용하는 Gemini 모델을 환경 변수 등으로 설정할 수 있도록.

## 알려진 문제점

-   Gemini 모델이 때때로 프롬프트의 지시를 완벽하게 따르지 못하고, JSON 형식 외의 텍스트를 반환하거나 JSON 구조를 잘못 생성할 수 있습니다. (현재 파싱 로직으로 일부 처리 중)
-   `gemini-2.5-flash` 모델 이름의 공식적인 존재 여부 확인 필요 (현재는 사용자 환경에 따라 사용 중).

